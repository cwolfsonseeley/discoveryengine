---
output: 
    html_document:
      css: stylesheets/github-light.css
      self_contained: no
      theme: null
---
<div class="wrapper">
<header>
<a href="index.html"><h1>Discoveryengine</h1></a>
<p></p>
<p class="view"><a href="https://github.com/tarakc02/discoveryengine">View the Project on GitHub <small>tarakc02/discoveryengine</small></a></p>
<ul>
<li><a href="examples.html">Introductory <strong>Examples</strong></a></li>
<li><a href="developer-notes.html">Notes for <strong>Developers</strong></a></li>
<li><a href="https://github.com/tarakc02/discoveryengine">View On <strong>GitHub</strong></a></li>
</ul>
</header>
<section>
## Some examples of the discoveryengine in use

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(width = 63)
```
```{r, echo = FALSE, message = FALSE, warning = FALSE}
library(dplyr)
library(getcdw)
library(listbuilder)
library(discoveryengine)

get_ids <- function(spec) distinct(getcdw::get_cdw(spec))
```

### General prospecting for a degree-granting unit
The goal is to identify some prospects for a new Haas portfolio. We'll do this in steps, starting with defining Haas constituents as anyone who either has a degree from Haas or has given to Haas: [Note that the newline and indenting are not necessary for things to work, I just did that to make things look nicer]

```{r ex1.1}
is_business_constituent = 
    has_degree_from(business) %or% gave_to_area(business)
```

But since we're building a new portfolio, we want to make sure we're not pulling in anyone who is already in a Haas portfolio:

```{r ex1.1.5}
is_business_prospect = 
    is_business_constituent %minus%
    in_unit_portfolio(business)
```

We'll define major gift prospects in terms of major gift score:
```{r ex1.2}
is_mg_prospect = 
    has_major_gift_score(more_likely, most_likely)
```

The major gift score helps us identify inclination, but for a major gift portfolio, we want to have high capacity. For this example, we'll define high capacity as having a researched capacity rating of $250K+, or having a sufficiently high implied capacity score:

```{r ex1.3}
is_wealthy = has_capacity(1:9) %or% 
    has_implied_capacity(more_likely, most_likely)
```

Putting it all together, we've defined a prospect pool from which to build our new portfolio:
```{r ex1.4}
my_prospects = 
    is_business_prospect %and% 
    is_wealthy %and% 
    is_mg_prospect
```

Let's see what we've got:
```{r ex1.getids, cache = TRUE}
get_ids(my_prospects)
```
</section>
<footer><small>theme by @orderedlist</small></footer>
</div>
<script src="javascripts/scale.fix.js"></script>
