---
output: 
    html_document:
      css: stylesheets/github-light.css
      self_contained: no
      theme: null
---
<div class="wrapper">
<header>
<a href="index.html"><h1>Discoveryengine</h1></a>
<p></p>
<p class="view"><a href="https://github.com/tarakc02/discoveryengine">View the Project on GitHub <small>tarakc02/discoveryengine</small></a></p>
<ul>
<li><a href="intro.html">Brief <strong>Intro</strong></a></li>
<li><a href="examples.html">Collection of <strong>Examples</strong></a></li>
<li><a href="https://github.com/tarakc02/discoveryengine">View On <strong>GitHub</strong></a></li>
</ul>
</header>
<section>
## Examples

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(width = 68)
```

```{r, echo = FALSE, message = FALSE, warning = FALSE}
library(dplyr)
library(getcdw)
library(listbuilder)
library(discoveryengine)

#get_ids <- function(spec) distinct(get_cdw(spec))
```

### A motivating example
Let's say Haas has just hired a new major gift fundraiser, and you'd like to begin prospecting to build her a portfolio. You could start out with the Prospect Discovery Tool. Or you could build a savedlist through Lookups. Perhaps you have other favorite tools in CADS and CADSmart. But what if you could just start typing out a description of the types of prospects you wanted, and then turn that description into a saved list? Here is an example of how we might do so, using the new `discoveryengine` tool from Prospect Analysis.

```{r ex1}
# any line that starts with a "#" is a comment, not part of the 
# program. it is often helpful to weave descriptive comments into your
# code, to preserve clarity

# we start by defining business constituents. 
# a business constituent is anyone with a business degree, or giving
# history:
is_business_constituent = 
    has_degree_from(business) %or% gave_to_area(business)

# we'll use the major gift score to zero in on the best prospects:
is_mg_prospect = 
    has_major_gift_score(more_likely, most_likely)

# and a major gift prospect needs major gift capacity
# we'll count as "wealthy" anyone who has a capacity over $250K+, or a
# high implied capacity score:
is_wealthy = 
    has_capacity(1:9) %or% 
    has_implied_capacity(more_likely, most_likely)

# but we should exclude anyone already in a portfolio
is_business_prospect = 
    is_business_constituent %minus%
    in_unit_portfolio(business)

# now let's put everything together!
my_prospects = 
    is_business_prospect %and% 
    is_wealthy %and% 
    is_mg_prospect
cat(to_sql(my_prospects))
```
</section>
<footer>
<p>This project is maintained by <a href="https://github.com/tarakc02">tarakc02</a></p>
<p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
</footer>
</div>
<script src="javascripts/scale.fix.js"></script>
